import*as THREE from"https://cdn.skypack.dev/three@0.129.0/build/three.module.js";import{GLTFLoader}from"https://cdn.skypack.dev/three@0.129.0/examples/jsm/loaders/GLTFLoader.js";document.addEventListener("DOMContentLoaded",()=>{let t=new Lenis;t.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{t.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);var e=document.querySelector(".menu-toggler");let o=document.querySelector(".menu-overlay"),i=e.querySelector("p"),n=!1,s=!1,a=(e.addEventListener("click",()=>{s||(n=!n,s=!0,n?(gsap.to(o,{opacity:1,duration:.5,ease:"power3.out",onStart:()=>{o.style.pointerEvents="all"},onComplete:()=>{s=!1}}),i.textContent="Close"):(gsap.to(o,{opacity:0,duration:.5,ease:"power3.out",onComplete:()=>{o.style.pointerEvents="none",s=!1}}),i.textContent="Menu"))}),document.querySelectorAll(".menu-item a").forEach(e=>{e.addEventListener("mouseenter",()=>{gsap.to(e,{backgroundSize:"100% 100%",duration:.75,ease:"power2.out",overwrite:!0})}),e.addEventListener("mouseleave",()=>{gsap.to(e,{backgroundSize:"0% 100%",duration:.25,ease:"power2.out",overwrite:!0})})}),{canvasBg:"#1a1a1a",modelPath:"./assets/images/model_2.glb",metalness:.55,roughness:.75,baseZoom:.35,baseCamPosX:window.innerWidth<991?0:-.75,baseCamPosY:-1.25,baseCamPosZ:0,baseRotationX:0,baseRotationY:0,baseRotationZ:0,ambientIntensity:.15,keyIntensity:.3,keyPosX:2.5,keyPosY:10,keyPosZ:10,fillIntensity:1.5,fillPosX:-5,fillPosY:2.5,fillPosZ:-2.5,rimIntensity:1.2,rimPosX:-7.5,rimPosY:5,rimPosZ:-10,topIntensity:.3,topPosX:0,topPosY:15,topPosZ:0,cursorLightEnabled:!0,cursorLightIntensity:2,cursorLightColor:16777215,cursorLightDistance:7.5,cursorLightDecay:2,cursorLightPosZ:1,cursorLightSmoothness:.5,cursorLightScale:1,parallaxSensitivityX:.25,parallaxSensitivityY:.05}),r=new THREE.Scene,d=(r.background=new THREE.Color(a.canvasBg),new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,1e3));e=document.querySelector("canvas");let l=new THREE.WebGLRenderer({canvas:e,antialias:!0});l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(Math.min(window.devicePixelRatio,2)),l.shadowMap.enabled=!0,l.shadowMap.type=THREE.PCFSoftShadowMap,l.outputEncoding=THREE.sRGBEncoding,l.toneMapping=THREE.ACESFilmicToneMapping,l.toneMappingExposure=1;e=new THREE.AmbientLight(16777215,a.ambientIntensity),r.add(e),e=new THREE.DirectionalLight(16777215,a.keyIntensity),e.position.set(a.keyPosX,a.keyPosY,a.keyPosZ),e.castShadow=!0,e.shadow.mapSize.width=4096,e.shadow.mapSize.height=4096,e.shadow.camera.near=.1,e.shadow.camera.far=100,e.shadow.bias=-5e-5,e.shadow.normalBias=.05,r.add(e),e=new THREE.DirectionalLight(16777215,a.fillIntensity),e.position.set(a.fillPosX,a.fillPosY,a.fillPosZ),r.add(e),e=new THREE.DirectionalLight(16777215,a.rimIntensity),e.position.set(a.rimPosX,a.rimPosY,a.rimPosZ),r.add(e),e=new THREE.DirectionalLight(16777215,a.topIntensity),e.position.set(a.topPosX,a.topPosY,a.topPosZ),r.add(e),e=new GLTFLoader;let c,m=new THREE.Vector3,h=(e.load(a.modelPath,e=>{(c=e.scene).traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material)&&(e.material.metalness=a.metalness,e.material.roughness=a.roughness,e.material.needsUpdate=!0)});e=(new THREE.Box3).setFromObject(c),m=e.getCenter(new THREE.Vector3),e=e.getSize(new THREE.Vector3),c.position.set(-m.x+a.baseCamPosX,-m.y+a.baseCamPosY,-m.z+a.baseCamPosZ),c.rotation.set(a.baseRotationX,a.baseRotationY,a.baseRotationZ),e=Math.max(e.x,e.y,e.z);d.position.z=e*a.baseZoom,d.lookAt(0,0,0),r.add(c)}),window.addEventListener("resize",()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight),a.baseCamPosX=window.innerWidth<991?0:-.75,c&&c.position.set(-m.x+a.baseCamPosX,-m.y+a.baseCamPosY,-m.z+a.baseCamPosZ)}),0),p=0,w=0,u=0,g=0,E=0,y=(document.addEventListener("mousemove",e=>{h=e.clientX/window.innerWidth*2-1,p=-e.clientY/window.innerHeight*2+1}),new THREE.PointLight(a.cursorLightColor,a.cursorLightIntensity,a.cursorLightDistance,a.cursorLightDecay)),P=(y.position.set(0,0,a.cursorLightPosZ),y.visible=a.cursorLightEnabled,r.add(y),0),L=0;document.addEventListener("mousemove",e=>{h=e.clientX/window.innerWidth*2-1,p=-e.clientY/window.innerHeight*2+1,P=h*a.cursorLightScale,L=p*a.cursorLightScale}),function e(){requestAnimationFrame(e),c&&(u=h*a.parallaxSensitivityX,w=-p*a.parallaxSensitivityY,g+=.05*(w-g),E+=.05*(u-E),c.rotation.x=a.baseRotationX+g,c.rotation.y=a.baseRotationY+E,c.rotation.z=a.baseRotationZ),y.position.x+=(P-y.position.x)*a.cursorLightSmoothness,y.position.y+=(L-y.position.y)*a.cursorLightSmoothness,l.render(r,d)}()});